import re
import collections

with open('scrape.html', 'r') as file:
	html = ''.join(line.strip('\n') for line in file.readlines())

replacements = [
	('&nbsp;', ' '),
	('&thorn;', 'þ'),
	('&eth;', 'ð'),
	('&aelig;', 'æ'),
	('<br>', ' '),
	('<br/>', ' '),
	('<strong>', ''),
	('</strong>', ''),
	('<em>', ''),
	('</em>', ''),
	('<b>', ''),
	('</b>', ''),
	('&#160;', ' '),
	('&lt;', '<'),
	('&gt;', '>'),

	('&#5792;', 'ᚠ'),
	('&#5793;', 'ᚡ'),
	('&#5794;', 'ᚢ'),
	('&#5795;', 'ᚣ'),
	('&#5796;', 'ᚤ'),
	('&#5797;', 'ᚥ'),
	('&#5798;', 'ᚦ'),
	('&#5799;', 'ᚧ'),
	('&#5800;', 'ᚨ'),
	('&#5801;', 'ᚩ'),
	('&#5802;', 'ᚪ'),
	('&#5803;', 'ᚫ'),
	('&#5804;', 'ᚬ'),
	('&#5805;', 'ᚭ'),
	('&#5806;', 'ᚮ'),
	('&#5807;', 'ᚯ'),
	('&#5808;', 'ᚰ'),
	('&#5809;', 'ᚱ'),
	('&#5810;', 'ᚲ'),
	('&#5811;', 'ᚳ'),
	('&#5812;', 'ᚴ'),
	('&#5813;', 'ᚵ'),
	('&#5814;', 'ᚶ'),
	('&#5815;', 'ᚷ'),
	('&#5816;', 'ᚸ'),
	('&#5817;', 'ᚹ'),
	('&#5818;', 'ᚺ'),
	('&#5819;', 'ᚻ'),
	('&#5820;', 'ᚼ'),
	('&#5821;', 'ᚽ'),
	('&#5822;', 'ᚾ'),
	('&#5823;', 'ᚿ'),
	('&#5824;', 'ᛀ'),
	('&#5825;', 'ᛁ'),
	('&#5826;', 'ᛂ'),
	('&#5827;', 'ᛃ'),
	('&#5828;', 'ᛄ'),
	('&#5829;', 'ᛅ'),
	('&#5830;', 'ᛆ'),
	('&#5831;', 'ᛇ'),
	('&#5832;', 'ᛈ'),
	('&#5833;', 'ᛉ'),
	('&#5834;', 'ᛊ'),
	('&#5835;', 'ᛋ'),
	('&#5836;', 'ᛌ'),
	('&#5837;', 'ᛍ'),
	('&#5838;', 'ᛎ'),
	('&#5839;', 'ᛏ'),
	('&#5840;', 'ᛐ'),
	('&#5841;', 'ᛑ'),
	('&#5842;', 'ᛒ'),
	('&#5843;', 'ᛓ'),
	('&#5844;', 'ᛔ'),
	('&#5845;', 'ᛕ'),
	('&#5846;', 'ᛖ'),
	('&#5847;', 'ᛗ'),
	('&#5848;', 'ᛘ'),
	('&#5849;', 'ᛙ'),
	('&#5850;', 'ᛚ'),
	('&#5851;', 'ᛛ'),
	('&#5852;', 'ᛜ'),
	('&#5853;', 'ᛝ'),
	('&#5854;', 'ᛞ'),
	('&#5855;', 'ᛟ'),
	('&#5856;', 'ᛠ'),
	('&#5857;', 'ᛡ'),
	('&#5858;', 'ᛢ'),
	('&#5859;', 'ᛣ'),
	('&#5860;', 'ᛤ'),
	('&#5861;', 'ᛥ'),
	('&#5862;', 'ᛦ'),
	('&#5863;', 'ᛧ'),
	('&#5864;', 'ᛨ'),
	('&#5865;', 'ᛩ'),
	('&#5866;', 'ᛪ'),
	('&#5867;', '᛫'),
	('&#5868;', '᛬'),
	('&#5869;', '᛭'),
	('&#5870;', 'ᛮ'),
	('&#5871;', 'ᛯ'),
	('&#5872;', 'ᛰ'),
	('&#5873;', 'ᛱ'),
	('&#5874;', 'ᛲ'),
	('&#5875;', 'ᛳ'),
	('&#5876;', 'ᛴ'),
	('&#5877;', 'ᛵ'),
	('&#5878;', 'ᛶ'),
	('&#5879;', 'ᛷ'),
	('&#5880;', 'ᛸ'),
	('&#5881;', '᛹'),
	('&#5882;', '᛺'),
	('&#5883;', '᛻'),
	('&#5884;', '᛼'),
	('&#5885;', '᛽'),
	('&#5886;', '᛾'),

]

words = set()
frequencies = collections.defaultdict(lambda: 0)

for match in re.finditer('<dd>(.*?)</dd>', html):
	body = match.group(1)
	body = body.lower()
	body = re.sub('<a.*?</a>', '', body)
	for replaced, replacement in replacements:
		body = body.replace(replaced, replacement)
	runes = 'ᚠᚡᚢᚣᚤᚥᚦᚧᚨᚩᚪᚫᚬᚭᚮᚯᚰᚱᚲᚳᚴᚵᚶᚷᚸᚹᚺᚻᚼᚽᚾᚿᛀᛁᛂᛃᛄᛅᛆᛇᛈᛉᛊᛋᛌᛍᛎᛏᛐᛑᛒᛓᛔᛕᛖᛗᛘᛙᛚᛛᛜᛝᛞᛟᛠᛡᛢᛣᛤᛥᛦᛧᛨᛩᛪ᛫᛬᛭ᛮᛯᛰᛱᛲᛳᛴᛵᛶᛷᛸ᛹᛺᛻᛼᛽᛾'
	for word in re.findall(f'[a-zþðæ{runes}]+', body):
		frequencies[word] += 1
		words.add(word)

words_sorted_by_frequency = sorted(words, key=lambda word: -frequencies[word])

for word in words_sorted_by_frequency:
	print(word, frequencies[word])

